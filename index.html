<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</title>
<script>
var endpoint = "https://www.jsonstore.io/9cfa993cd55704f2254949dc21a5f3a7a63ae2c6425fb242b575a1951d359b69";

function fetchJSON(a) {
    var t = new XMLHttpRequest;
    return t.open("GET", a, !1), t.send(null), t.responseText
}

function isURL(a) {
    var t = /^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;
    return t.test(a) ? (console.log(t.test(a)), !0) : (console.log(t.test(a)), !1)
}
var gethash = window.location.hash.substr(1);
if ("" != window.location.hash) {
    var res = JSON.parse(fetchJSON(endpoint + "/" + gethash)),
        data = res.result;
    null != data && isURL(data) && (window.location.href = data)
}
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-3325476-169"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-3325476-169');
</script>
</head>
<body>
<h1>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</h1>
<p>Are your URLs too short? Lengthen your URLs conveniently and share your links without ambiguity (<em>"All As."</em>).</p>
<p><input type="url" id="inputURL" placeholder="Enter your URL..."> <button id="lengthenButton" type="button">Lengthen</button></p>
<p><textarea id="outputURL" style="width:80%;background-color:#eee" rows="2" onclick="this.focus();this.select()" readonly="readonly"></textarea></p>
<p><input type="button" value="Copy" onclick="copy();"> <input type="button" value="Reset" onclick="resetPage();"/></p>

<script>function copy() {
    if (document.getElementById('outputURL').value !== 'Please enter a valid URL') {
        document.getElementById('outputURL').select();
        document.execCommand('copy')
    }
}

function resetPage() {
    document.getElementById('inputURL').value = "";
    document.getElementById('outputURL').value = "";
    history.pushState("", document.title, window.location.pathname + window.location.search)
}

let pushJSON = (url, data) => {
    let request = new XMLHttpRequest();
    request.open('POST', url);
    request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
    request.send(JSON.stringify(data))
};
let cinp = () => {
    let res = JSON.parse(fetchJSON(endpoint));
    let data = res.result;
    if (data != null) {
        return !1
    } else if (data == null) {
        return !0
    }
};
let getURL = () => {
    let url = document.getElementById("inputURL").value;
    return url
};
let getRandom = () => {
    let text = "";
    let possible = "Aa";
    for (let i = 0; i < 40; i++) text += possible.charAt(Math.floor(Math.random() * possible.length));
    return text
};
let genHash = () => {
    window.location.hash = getRandom();
    checkExist()
};
let checkExist = () => {
    let url = window.location.hash.substr(1);
    let res = JSON.parse(fetchJSON(endpoint + '/' + url));
    let data = res.result;
    if (data != null) {
        genHash()
    }
};
let send_request = (url) => {
    let myurl = url;
    let address = endpoint + "/" + window.location.hash.substr(1);
    pushJSON(address, myurl);
    document.getElementById('outputURL').value = window.location.href
};
let shortURL = () => {
    let longurl = getURL();
    var valid = /^(ftp|http|https):\/\/[^ "]+$/.test(longurl);
    if (!valid) {
        document.getElementById('outputURL').value = "Please enter a valid URL"
    } else {
        genHash();
        send_request(longurl)
    }
};
document.getElementById("lengthenButton").addEventListener("click", shortURL);
</script>

<p style="padding-top: 20px; padding-bottom: 20px; font-size: x-small"><a href="case-convert">Case Convert</a> - <a href="list-sort">List Sort</a> - <a href="nric">NRIC Generator/Validator</a> - <a href="random-number">Random Number</a> - <a href="remove-duplicate-lines">Remove Duplicate Lines</a> - <a href="remove-line-breaks">Remove Line Breaks</a> - <a href="word-count">Word Count</a></p>

</body>
</html>
